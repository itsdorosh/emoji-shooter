<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Emoji Shooter 🔫</title>
	<link rel="stylesheet" href="./main.css">
</head>
<body>
<div id="inGameButtons" class="position-absolute hide">
	<p id="pointsCount">Count: 0</p>
	<button id="pauseButton">Pause ⏸</button>
</div>

<div id="gameButtons" class="position-absolute">
	<h1 id="greetingCaption">Emoji Shooter 🔫</h1>
	<h1 id="gameOverCaption" class="hide">GAME OVER</h1>
	<button id="playButton">Play ▶️</button>
	<button id="restartButton" class="hide">Restart 🔄</button>
</div>
<div id="canvasContainer"></div>

<script src="https://unpkg.com/three@0.119.1/build/three.js"></script>
<script src="./src/constants.js"></script>
<script src="src/enemies.js"></script>
<script src="./src/controls.js"></script>
<script src="./src/raycaster.js"></script>
<script src="./src/viewer.js"></script>
<script src="./src/engine.js"></script>

<script>
	// containers
	const canvasContainer = document.getElementById('canvasContainer');
	const inGameButtons = document.getElementById('inGameButtons');
	const gameButtons = document.getElementById('gameButtons');

	// buttons
	const playButton = document.getElementById('playButton');
	const pauseButton = document.getElementById('pauseButton');
	const restartButton = document.getElementById('restartButton');

	// captions
	const greetingCaption = document.getElementById('greetingCaption');
	const gameOverCaption = document.getElementById('gameOverCaption');

	const viewer = new Viewer(canvasContainer);
	const controls = new Controls(canvasContainer);
	const raycaster = new Raycaster(viewer.camera);
	const engine = new Engine(viewer, controls, raycaster);

	engine.onPointCountUpdate((count) => {
		document.getElementById('pointsCount').innerText = `Count: ${count}`;
	});

	engine.onGameOver(() => {
		gameButtons.classList.remove('hide');
		greetingCaption.classList.add('hide');
		gameOverCaption.classList.remove('hide');
		playButton.classList.add('hide');
		restartButton.classList.remove('hide');
	});

	playButton.addEventListener('click', () => {
		gameButtons.classList.add('hide');
		inGameButtons.classList.remove('hide');
		engine.play();
	});

	pauseButton.addEventListener('click', () => {
		gameButtons.classList.remove('hide');
		restartButton.classList.remove('hide');
		engine.pause();
	});

	restartButton.addEventListener('click', () => {
		greetingCaption.classList.add('hide');
		gameOverCaption.classList.remove('hide');
		gameButtons.classList.add('hide');
		engine.restart();
	});
</script>
</body>
</html>
